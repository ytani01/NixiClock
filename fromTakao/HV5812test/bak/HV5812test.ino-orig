#define PIN_HV5812_CLK 26
#define PIN_HV5812_STROBE 13
#define PIN_HV5812_DATA 14
#define PIN_HV5812_BLANK 4
#define PIN_COLON_R 16
#define PIN_COLON_L 17
#define PIN_LED 27

uint8_t pinSw[] = {33, 34, 35};

bool nixArray[60];
uint8_t n1, n2, n3, n4, n5, n6;

uint8_t pins[] = {PIN_HV5812_CLK, PIN_HV5812_STROBE, PIN_HV5812_DATA, 
		  PIN_HV5812_BLANK, PIN_COLON_R, PIN_COLON_L,
		  PIN_LED
};
                    
uint8_t d1[] = { 9,  0,  1,  2,  3,  4,  5,  6,  7,  8};
uint8_t d2[] = {19, 10, 11, 12, 13, 14, 15, 16, 17, 18};
uint8_t d3[] = {29, 20, 21, 22, 23, 24, 25, 26, 27, 28};
uint8_t d4[] = {39, 30, 31, 32, 33, 34, 35, 36, 37, 38};
uint8_t d5[] = {49, 40, 41, 42, 43, 44, 45, 46, 47, 48};
uint8_t d6[] = {59, 50, 51, 52, 53, 54, 55, 56, 57, 58};

void setup() {
  // put your setup code here, to run once:

  Serial.begin(115200);
  Serial.println("begin");
  
  for(int i=0; i<7; i++){
    pinMode(pins[i], OUTPUT);
    digitalWrite(pins[i], LOW);
  }

  for (int i=0; i<3; i++) {
    pinMode(pinSw[i], INPUT);
    int val = digitalRead(pinSw[i]);
    Serial.println("SW[" + String(i) + "]=" + String(val) );
  }
}

void loop() {
  // put your main code here, to run repeatedly:
  for (int i=0; i<3; i++) {
    int val = digitalRead(pinSw[i]);
    Serial.print("SW[" + String(i) + "]=" + String(val) + "  ");
  }
  Serial.println("");


  for (int i=0; i<10; i++){
    digitalWrite(pins[4], HIGH);

    n1 = d1[i];
    n2 = d2[i];
    n3 = d3[i];
    n4 = d4[i];
    n5 = d5[i];
    n6 = d6[i];
    
    displayNix();
    delay(500);

    digitalWrite(pins[4], LOW);
    delay(500);
  }
}

void displayNix(){
  for(int i = 59; i >= 0; i--){
    nixArray[i] = 1;
  }

  nixArray[n1] = 0;
  nixArray[n2] = 0;
  nixArray[n3] = 0;
  nixArray[n4] = 0;
  nixArray[n5] = 0;
  nixArray[n6] = 0;

  for (int i = 59; i >= 0; i--){
    digitalWrite(PIN_HV5812_DATA, nixArray[i]);
    digitalWrite(PIN_HV5812_CLK, HIGH);
    delay(1);
    digitalWrite(PIN_HV5812_CLK, LOW);
    delay(1);
  }

  digitalWrite(PIN_HV5812_STROBE, HIGH);
  delay(1);
  digitalWrite(PIN_HV5812_STROBE, LOW);
  delay(1);
}
